#!/usr/bin/env bash
# Configures Nginx to include a custom HTTP response header

# Update package list and install nginx
apt-get update
apt-get install -y nginx

# Get the hostname
HOSTNAME=$(hostname)

# Configure Nginx to add custom header
# shellcheck disable=SC2154
sed -i "/server_name _;/a \\\tadd_header X-Served-By \$hostname;" /etc/nginx/sites-available/default

# Ensure nginx is running
service nginx restart
